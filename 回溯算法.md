# 回溯算法（Back Tracking）

## 1. 算法介绍
回溯法，可以系统的搜索一个问题的所有解或任一解。回溯法通常涉及到对问题状态的深度优先搜索，在搜索过程中，算法尝试一步步地构建解决方案，每次决策都会将问题状态转移到下一步，并检查当前状态是否满足问题的要求。如果当前状态满足问题要求，则继续向下搜索；如果不满足要求，则回溯到上一个状态，并尝试其他的决策。

回溯法的算法目的是在给定的问题中，通过**穷举**所有可能的解空间来找到满足问题要求的解。它通常适用于组合、排列、子集、棋盘类等问题，其中每一步都有多个选择，并且需要满足一定的约束条件。

回溯算法的**基本思想**是逐步构建解决方案，并在每一步中检查当前的解是否满足问题的条件。如果当前的解满足条件，那么就继续尝试下一个步骤；如果不满足条件，就回溯到前一步并尝试其他可能的选项。这样一直进行下去，直到找到满足所有条件的解或者遍历完所有可能的情况。
回溯法的基本思想是深度优先搜索（DFS），通过递归的方式进行搜索和回溯。

回溯算法**基本步骤**：
- 「选择」：在当前步骤中，从可选的选择中选择一个。
- 「验证」：检查选择是否满足问题的约束条件和限制。
- 「递归」：进入下一步骤，继续选择和验证。
- 「撤销」：如果选择不满足问题要求，回溯到上一步，撤销当前选择，并尝试其他选择。

图形展示

![enter image description here](https://github.com/xiaohuidu/algorithm/blob/master/images/af04fbf27f884eae844d356d4c9bd3ea.png)


## 2. 实例
### 2.1 复原IP 地址

**有效 IP 地址**  正好由四个整数（每个整数位于  `0`  到  `255`  之间组成，且不能含有前导  `0`），整数之间用  `'.'`  分隔。

-   例如：`"0.1.2.201"`  和 `"192.168.1.1"`  是  **有效**  IP 地址，但是  `"0.011.255.245"`、`"192.168.1.312"`  和  `"192.168@1.1"`  是  **无效**  IP 地址。

给定一个只包含数字的字符串  `s`  ，用以表示一个 IP 地址，返回所有可能的**有效 IP 地址**，这些地址可以通过在  `s`  中插入 `'.'`  来形成。你  **不能** 重新排序或删除  `s`  中的任何数字。你可以按  **任何**  顺序返回答案。

**示例 1：**

**输入：**s = "25525511135"
**输出：**["255.255.11.135","255.255.111.35"]

**示例 2：**

**输入：**s = "0000"
**输出：**["0.0.0.0"]

**示例 3：**

**输入：**s = "101023"
**输出：**["1.0.10.23","1.0.102.3","10.1.0.23","10.10.2.3","101.0.2.3"]

**提示：**

-   `1 <= s.length <= 20`
-   `s`  仅由数字组成

**思路与算法：**

由于我们需要找出所有可能复原出的 IP 地址，因此可以考虑使用回溯的方法，对所有可能的字符串分隔方式进行搜索，并筛选出满足要求的作为答案。

设题目中给出的字符串为 sss。我们用递归函数 dfs(segId,segStart)\textit{dfs}(\textit{segId}, \textit{segStart})dfs(segId,segStart) 表示我们正在从 s[segStart]s[\textit{segStart}]s[segStart] 的位置开始，搜索 IP 地址中的第 segId\textit{segId}segId 段，其中 segId∈{0,1,2,3}\textit{segId} \in \{0, 1, 2, 3\}segId∈{0,1,2,3}。由于 IP 地址的每一段必须是 [0,255][0, 255][0,255] 中的整数，因此我们从 segStart\textit{segStart}segStart 开始，从小到大依次枚举当前这一段 IP 地址的结束位置 segEnd\textit{segEnd}segEnd。如果满足要求，就递归地进行下一段搜索，调用递归函数 dfs(segId+1,segEnd+1)\textit{dfs}(\textit{segId} + 1, \textit{segEnd} + 1)dfs(segId+1,segEnd+1)。

特别地，由于 IP 地址的每一段不能有前导零，因此如果 s[segStart]s[\textit{segStart}]s[segStart] 等于字符 000，那么 IP 地址的第 segId\textit{segId}segId 段只能为 000，需要作为特殊情况进行考虑。

在搜索的过程中，如果我们已经得到了全部的 444 段 IP 地址（即 segId=4\textit{segId} = 4segId=4），并且遍历完了整个字符串（即 segStart=∣s∣\textit{segStart} = |s|segStart=∣s∣，其中 ∣s∣|s|∣s∣ 表示字符串 sss 的长度），那么就复原出了一种满足题目要求的 IP 地址，我们将其加入答案。在其它的时刻，如果提前遍历完了整个字符串，那么我们需要结束搜索，回溯到上一步。

作者：力扣官方题解
链接：https://leetcode.cn/problems/restore-ip-addresses/solutions/366426/fu-yuan-ipdi-zhi-by-leetcode-solution/
来源：力扣（LeetCode）
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
### 2.2 xxx
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTU5NDI5MDE1NiwtMTY3ODMzMzY5OCwtMT
UwMjU0ODEzMCwyMTUyMjM4MDgsLTE4NTMzMjIzNTldfQ==
-->